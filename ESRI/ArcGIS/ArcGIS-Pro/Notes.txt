Working with .aprx files with geoprocessing services:
    there is a known bug with using aprx.save() in ArcGIS Pro:

        https://support.esri.com/en-us/bug/an-oserror-message-is-returned-when-using-the-arcgis-pr-bug-000145915

    it seems like re-starting the EC2 server instance fixed the issue and I was able to run the GP script after opening Pro after the re-start. However, re-running the script and I was seeing the same issue again.

    close pro then re-open pro
    runs first time after opening pro
    fails if you run second time in the same pro session apparently

    the above testing is after calling
        del aprx
    which doesn't seem to resolve the issue

    https://pro.arcgis.com/en/pro-app/latest/arcpy/mapping/arcgisproject-class.htm
        apparently if the Pro project has been accessed by another script, the Project gets put in read-only mode which makes it so that you can't use .save()
    
    aprx.saveACopy(aprx_path) and overwriting on the same file seems to work as a work-around


Import a .mxd file:
    under the insert tab, click import map



Sharing a geoprocessing service:
    If you are not using portal, then when you right-click a geoprocessing task in the geoprocessing history pane > share as, share web tool will be greyed out if you are using a stand-alone server.

    To publish, you must save as offline-service definition, then in ArcGIS Server Manager, go to services > "Publish Service" > publish from the service definition.

    If you want to overwrite on the service with the same name, right-click the ArcGIS Server Manager tab in chrome > duplicate tab > then delete the old service before publishing again.




Create a shapefile:
    right click layer in contents pane on the left > data > export features >
        output feature class: select folder outside out .gdb and name it *.shp

Adding rest service url / fc path
    Add Data > Data from Path > paste path.
        e.g. 'M:\...\request_data\request.gdb'
        or 'https://webserver.com/path/MapServer/0'

Connect to SDE:
    In 'Catalog' tab on the right pane:

    right-click 'Databases' > New Database Connection > 
        e.g. Database Platform = SQL Server etc.

Create a CSV:
    In 'Catalog' tab on the right pane:

    Type 'table to excel' in the search bar > click 'Table to Excel' > Select FC for Input Table, select output > Run

    This generates an .xlsx > You have to open it excel, there may be some errors, just try to inspect the Excel file > Save it as a .csv

Query:
    https://www.youtube.com/watch?v=KzcmLJr4Bbk

    Map tab > Select By Attributes > New selection / SQL > e.g. OBJECTID = 19429

Clone a Python instance:
    Launch ArcGIS Pro, click the Settings button the bottom left, click the Python tab on the left panel, click the Manage Environments button, and click Clone Default. 
    Path to local instance: C:\Users\%USERPROFILE%\App Data\Local\ESRI\conda\envs\[arcgispro-py3-clone]\python.exe